<view class="container">
  <view class="top-bar">
    <view class="back-btn" bindtap="goBack">
      <text class="back-icon">←</text>
    </view>
    <view class="title">紧急事件上报</view>
  </view>

  <!-- 位置信息区域 -->
  <view class="location-section">
    <view class="location-title">位置信息</view>
    <view class="location-container">
      <view 
        class="location-input"
        bindtap="chooseLocation"
      >
        <text class="location-icon">📍</text>
        <text class="location-text">{{locationName || '点击获取当前位置'}}</text>
      </view>
      <view class="location-hint">点击位置信息可重新选择</view>
    </view>
  </view>

  <!-- 紧急程度选择 -->
  <view class="emergency-section">
    <view class="section-title">紧急程度</view>
    <view class="emergency-options">
      <view 
        class="emergency-option {{emergencyLevel == 1 ? 'active' : ''}}"
        bindtap="selectEmergencyLevel" 
        data-level="1"
      >
        <text class="option-title">一般</text>
        <text class="option-desc">4小时内处理</text>
      </view>
      <view 
        class="emergency-option {{emergencyLevel == 2 ? 'active' : ''}}"
        bindtap="selectEmergencyLevel" 
        data-level="2"
      >
        <text class="option-title">紧急</text>
        <text class="option-desc">1小时内处理</text>
      </view>
    </view>
  </view>

  <!-- 现场描述 -->
  <view class="description-section">
    <view class="section-title">现场描述</view>
    <textarea 
      class="description-input" 
      placeholder="请详细描述现场情况，包括时间、行为类型、涉及人员等信息"
      value="{{description}}"
      bindinput="onDescriptionInput"
      maxlength="500"
      placeholder-class="placeholder"
    ></textarea>
    <text class="word-count">{{description.length}}/500</text>
  </view>

  <!-- 上传证据 -->
  <view class="evidence-section">
    <view class="section-title">上传证据</view>
    <view class="evidence-hint">最多上传9张图片</view>
    <view class="evidence-upload">
      <view class="upload-btn" bindtap="chooseImage">
        <text class="upload-icon">📷</text>
        <text class="upload-text">拍照/相册</text>
      </view>
    </view>
    <!-- 已上传的图片 -->
    <view class="image-list">
      <view 
        wx:for="{{images}}" 
        wx:key="index" 
        class="image-item"
      >
        <image src="{{item}}" mode="aspectFill" class="upload-image" />
        <view class="delete-btn" bindtap="deleteImage" data-index="{{index}}">×</view>
      </view>
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button 
      class="submit-btn" 
      bindtap="submitReport"
      disabled="{{submitting}}"
      loading="{{submitting}}"
    >提交上报</button>
    <view class="agreement">提交即表示您同意《用户上报协议》</view>
  </view>
</view>